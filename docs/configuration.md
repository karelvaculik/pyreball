# Configuration and CLI Arguments

Pyreball uses a few configuration and template files when generating an HTML file.
Its behaviour can be also controlled via optional CLI arguments.
This section describes how to work with these files and CLI arguments.

## CLI Arguments

Pyreball contains various arguments that can be displayed by:

```shell
pyreball --help
```

Typical `pyreball` call could be summarized as:

```shell
pyreball <pyreball options> <Python script path> <Python script args>
```

The Python script path is the only required argument at the moment.
This argument can be preceded by pyreball options described below.
There can be also arguments for the script itself, in which case they should be just passed after the script path.
For better readability, the script arguments can be delimited from script path by `--`.
An example of a call:

```shell
pyreball --page-width=90 my_script.py -- --sum 23 25 24
```

In this example, script `my_script.py` uses option `--sum` followed by one or more numbers.

By default, Pyreball re-uses the input script path to get the output HTML file, only changing the `.py` suffix
to `.html`. The output path can be modified by option `--output-path`.
If the output path ends with `.html`, it is interpreted as HTML file path. If not, it is interpreted as a directory,
where the HTML file should be created. In such a case, the HTML file will have the same filename stem as the input
script (e.g., `my_report.py` would produce `my_report.html`).

Another optional argument is `--config-path`, which can be used to override the directory path with configuration files.
More information about configuration files and how `--config-path` is used can be found in the remained of this
document.

Other options are tightly coupled with settings in configuration files and function parameters and are thus described
at one place in
section [config.ini vs. CLI arguments vs. function arguments](#configini-vs-cli-arguments-vs-function-arguments).

## Config Files

When Pyreball is installed, it also creates a config directory with a few files in the installation directory.
This directory contains HTML and CSS templates as well as `config.ini` file with various settings.

### Template files

There are currently three template files:

* `styles.template` - Contains CSS definitions that are inserted into the final HTML file.
* `html_begin.template` - Contains the beginning of the HTML file. Everything generated by Pyreball from your Python
  script goes right after this text. It contains three placeholders:
    * `{{title}}` - Here goes the title set by [`set_title()`](../api/pyreball_html/#pyreball.html.set_title) function
      or Table-of-Contents title.
    * `{{script_definitions}}` - Here go JavaScript definitions. There is currently no file for these definitions,
      they are created by Pyreball code.
    * `{{css_definitions}}` - The CSS definitions from `styles.template` are inserted here.
* `html_end.template` - Contains the end of the HTML file, which goes after content generated from your script.

### config.ini File

`config.ini` file controls behaviour of Pyreball as well as how various elements should be displayed in the final HTML.
The default `config.ini` looks like this:

{{ inline_source("pyreball/cfg/config.ini", "cfg") }}

Detailed description is provided in
section [config.ini vs. CLI arguments vs. function arguments](#configini-vs-cli-arguments-vs-function-arguments).

### Modifying Config Files

If you need to modify any configuration files, it is not recommended to modify them directly, because they server
as default settings.
It is rather recommended to generate a copy of these defaults and modify it.
This can be achieved by running `pyreball-generate-config` command, which is also available after installing Pyreball.

When executed without any arguments, it copies the default configuration files into `~/.pyreball` directory, where
you can change them:

```shell
pyreball-generate-config
```

The output directory can be changed with `--output-dir` parameter. For example, to copy the files into `config`
subdirectory of the current working directory:

```shell
pyreball-generate-config --output-dir ./config
```

!!! warning

    Improper modification of the configuration files might break the functionality of Pyreball.

## config.ini vs. CLI arguments vs. function arguments

Several aspects of Pyreball's behaviour can be changed through `config.ini` file, `pyreball` CLI arguments, or function
parameters. The following table shows the parameter alternatives between these three options.

!!! note

    Acceptable values mentioned in the table below are primarily intended for `config.ini` and CLI arguments.
    The function arguments might be slightly different, so it's recommended to see appropriate API documentation
    of given function. For example, instead of values `yes` and `no`, the functions usually use Boolean values 
    `True` and `False`.

| `config.ini` key           | CLI argument                 | Function argument                                                                        | Description                                                                                                                                                                                                                                             |
|----------------------------|------------------------------|------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `toc`                      | `--toc `                     | _N/A_                                                                                    | Include table of contents. It is included only when there are any headings. Allowed values: `yes`, `no`.                                                                                                                                                |
| `align-tables`             | `--align-tables`             | `align` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)            | Horizontal alignment of tables. Allowed values: `left`, `center`, `right`.                                                                                                                                                                              |
| `table-captions-position`  | `--table-captions-position`  | `caption_position` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table) | Caption position. Allowed values: `top`, `bottom`.                                                                                                                                                                                                      |
| `numbered-tables`          | `--numbered-tables`          | `numbered` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)         | Whether to number tables. Allowed values: `yes`, `no`.                                                                                                                                                                                                  |
| `tables-display-option`    | `--tables-display-option`    | `display_option` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)   | How to display table. This option is useful for long tables, which should not be displayed fully. Allowed values are: `full` (show the full table), `scrolling` (show the table in scrolling mode on y-axis), `paging` (show the table in paging mode). |
| `tables-paging-sizes`      | `--tables-paging-sizes`      | `paging_sizes` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)     | The paging sizes that can be selected. Ignored when `tables-display-option` is not `paging`. Allowed values are integers and string `all` (no matter the case of letters), written as a non-empty comma-separated list.                                 |
| `tables-scroll-y-height`   | `--tables-scroll-y-height`   | `scroll_y_height` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)  | Height of the tables when `tables-display-option` is set to `scrolling`. Any string compatible with CSS sizing can be used, e.g. `300px`, `20em`, etc.                                                                                                  |
| `tables-scroll-x`          | `--tables-scroll-x`          | `scroll_x` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)         | Whether to allow scrolling on the x-axis. If turned off, a wide table is allowed to overflow the main container. It is recommended to turn this on. Allowed values: `yes`, `no`.                                                                        |
| `sortable-tables`          | `--sortable-tables`          | `sortable` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)         | Whether to make columns in tables sortable. Allowed values: `yes`, `no`.                                                                                                                                                                                |
| `tables-search-box`        | `--tables-search-box`        | `show_search_box` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table)  | Whether to show the search box for the tables. Allowed values: `yes`, `no`.                                                                                                                                                                             |
| `tables-datatables-style`  | `--tables-datatables-style`  | `datatables_style` in [`print_table()`](../api/pyreball_html/#pyreball.html.print_table) | Datatables class(es) that affect the tables styling. If multiple classes are provided, separate them either with commas or spaces. See [DataTables documentation](https://datatables.net/manual/styling/classes) with the possible values.              |
| `align-figures`            | `--align-figures`            | `align` in [`print_figure()`](../api/pyreball_html/#pyreball.html.print_figure)              | Horizontal alignment of figures. Allowed values: `left`, `center`, `right`.                                                                                                                                                                             |
| `figure-captions-position` | `--figure-captions-position` | `caption_position` in [`print_figure()`](../api/pyreball_html/#pyreball.html.print_figure)   | Caption position. Allowed values: `top`, `bottom`.                                                                                                                                                                                                      |
| `numbered-figures`         | `--numbered-figures`         | `numbered` in [`print_figure()`](../api/pyreball_html/#pyreball.html.print_figure)           | Whether to number figures. Allowed values: `yes`, `no`.                                                                                                                                                                                                 |
| `matplotlib-format`        | `--matplotlib-format`        | `matplotlib_format` in [`print_figure()`](../api/pyreball_html/#pyreball.html.print_figure)  | Format of matplotlib (and thus also seaborn) figures. Allowed values: `png`, `svg`.                                                                                                                                                                     |
| `matplotlib-embedded`      | `--matplotlib-embedded`      | `embedded` in [`print_figure()`](../api/pyreball_html/#pyreball.html.print_figure)           | Whether to embedded matplotlib (and thus also seaborn) figures directly into HTML. Only for svg format. Allowed values: `yes`, `no`.                                                                                                                    |
| `numbered-headings`        | `--numbered-headings`        | _N/A_                                                                                    | Whether to number headings. Allowed values: `yes`, `no`.                                                                                                                                                                                                |
| `page-width`               | `--page-width`               | _N/A_                                                                                    | Width of the page container in percentage. Allowed values: An integer in the range 40..100.                                                                                                                                                             |
| `keep-stdout`              | `--keep-stdout`              | _N/A_                                                                                    | Whether to print the output to stdout too: `yes`, `no`.                                                                                                                                                                                                 |

The reason for having multiple options for setting these values is to allow the user to set some properties globally,
while others locally as needed for particular scripts.

When evaluating which value is used, the following order is considered:

1. If the function parameter is not `None`, use it. Otherwise,
2. If the CLI option is used, use its value. Otherwise,
3. If `--config-path` CLI option is used, use value of `config.ini` referenced by this option. Otherwise,
4. If `~/.pyreball` directory with `config.ini` file exists, use value from this config file. Otherwise,
5. Use value of the default `config.ini` from the installation directory.
